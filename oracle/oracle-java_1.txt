
http://fornera.com/helpdesk/oracleJavaStoredProceduresSetup.html



create or replace and compile
java source named "demo"
as
import java.sql.SQLException;

public class demo extends Object
{
static int counter = 0;

public static int IncrementCounter() throws SQLException
{
	counter ++;
  System.out.println("Enter Increment Counter, counter = " + counter);
  System.out.println("Exit IncrementCounter, counter = " + counter);
  return counter;
}
}
/


create or replace and compile
java source named "demo"
as
import java.sql.SQLException;

public class demo extends Object
{
static int counter = 0;

public static int IncrementCounter() throws SQLException
{
  System.out.println("Enter Increment Counter, counter = " + counter);
  if (++counter >= 3)
  {
    System.out.println("Error! counter = " + counter);
    #sql {
     begin raise_application_error(-20001,'Too many calls'); end;
    };
  }
  System.out.println("Exit IncrementCounter, counter = " + counter);
  return counter;
}
}
/

create or replace
function java_counter return number
as
language java
name 'demo.IncrementCounter() return integer';
/


SQL> set serveroutput on
SQL> exec dbms_output.put_line(java_counter);
1


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
drop java source "demo";

