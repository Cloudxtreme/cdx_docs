
wajig install monit

vi /etc/default/monit
startup=1


cd /etc/monit

more monitrc

set daemon  60
set mailserver smtp.cardiodx.com
set logfile syslog facility log_daemon 
set alert it@cardiodx.com

check process fetchmail_it with pidfile /var/run/fetchmail_it.pid
  start program = "/etc/init.d/fetchmail-cdx start"
  stop program = "/etc/init.d/fetchmail-cdx stop"
  if 5 restarts within 5 cycles then timeout

check process fetchmail_clia with pidfile /var/run/fetchmail_clia.pid
  start program = "/etc/init.d/fetchmail-cdx start"
  stop program = "/etc/init.d/fetchmail-cdx stop"
  if 5 restarts within 5 cycles then timeout

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
--
-- kvm servers
--
set daemon  120
set logfile syslog facility log_daemon
set mailserver smtp.cardiodx.com
set alert cchou@cardiodx.com

check system kvmsrv1
  if loadavg (1min) > 4 then alert
  if loadavg (5min) > 2 then alert
  if memory usage > 75% then alert
  if cpu usage (user) > 70% then alert
  if cpu usage (system) > 30% then alert
  if cpu usage (wait) > 20% then alert

